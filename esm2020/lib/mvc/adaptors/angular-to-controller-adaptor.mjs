import * as dependencies from '@polpware/fe-dependencies';
const _ = dependencies.underscore;
const noop = _.noop;
export function adaptAngularToController(context) {
    return {
        $data: {
            init: function () {
                context.$scope.moreDataCanBeLoaded = false;
            },
            setRefreshCallback: function (callback) {
                context.$scope.callbacks.onRefresh = callback;
            },
            setInfiniteCallback: function (callback) {
                context.$scope.callbacks.onInfinite = callback;
            },
            clean: function () {
                context.$scope.onItemsReady();
            },
            asyncPush: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            syncPush: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            asyncPop: function (items) {
                context.$scope.onItemsReady();
            },
            syncPop: function (items) {
                context.$scope.onItemsReady();
            },
            asyncPrepend: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            syncPrepend: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            asyncRefresh: noop,
            syncRefresh: noop,
            hasMoreData: function (flag) {
                context.$scope.moreDataCanBeLoaded = flag;
            },
            getItems: function () {
            },
            setupSearch: function (criteria, callback) {
                context.$scope.searchCriteria = criteria;
                context.$scope.doSearch = callback;
            },
            updateSearchCriteria: function (criteria) {
                context.$scope.searchCriteria = criteria;
            },
            getAncestor: function () {
                return context.$scope.ancestor;
            }
        },
        $loader: {
            show: function () {
                context.$scope.showLoadingIndicator();
            },
            hide: function () {
                context.$scope.hideLoadingIndicator();
            }
        },
        $refresher: {
            show: function () {
                context.$scope.showRefreshingIndicator();
            },
            hide: function () {
                context.$scope.hideRefreshingIndicator();
            }
        },
        $moreLoader: {
            show: function () {
                context.$scope.showMoreLoading();
            },
            hide: function () {
                context.$scope.hideMoreLoading();
            }
        },
        $router: {
            go: function (url, data) {
                context.$state.go(url, data);
            }
        },
        $render: {
            ready: function (callback) {
                context.$scope.callbacks.onViewDidLoad = callback;
            },
            destroy: function (callback) {
                context.$scope.callbacks.onViewWillUnload = callback;
            },
            asyncDigest: noop
        },
        $navBar: {
            /**
             * Get current state
             * @returns {}
             */
            getState: noop,
            /**
             * Set state
             * @param {Boolean} s
             */
            setState: noop
        },
        $modal: {
            setData: function (key, data) {
                context.$scope[key] = data;
            },
            getData: function (key) {
                return context.$scope[key];
            },
            build: noop
        },
        $popover: {
            setData: function (key, data) {
                context.$scope[key] = data;
            },
            getData: function (key) {
                return context.$scope[key];
            },
            build: noop,
            onHidden: noop
        },
        $popup: {
            setData: function (data) {
                context.$scope.popupInput = _.extend({
                    confirmed: false
                }, data);
            },
            getData: function () {
                return context.$scope.popupInput;
            },
            build: noop,
            confirm: noop,
            prompt: noop,
            alert: noop
        },
        $progressBar: {
            create: noop,
            reset: function () {
                context.$scope.progressBar = 0;
            },
            createInfinite: noop,
            onProgress: function (percentage) {
                context.$scope.progressBar = percentage;
            },
            destroy: noop,
            destroyInfinite: noop,
            showAbort: noop
        },
        $alertify: context.alertify,
        $history: {
            goBack: function () {
                context.$ionicHistory.goBack();
            }
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci10by1jb250cm9sbGVyLWFkYXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wb2xwd2FyZS9uZ3gtbXZjL3NyYy9saWIvbXZjL2FkYXB0b3JzL2FuZ3VsYXItdG8tY29udHJvbGxlci1hZGFwdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxZQUFZLE1BQU0sMkJBQTJCLENBQUM7QUFLMUQsTUFBTSxDQUFDLEdBQUcsWUFBWSxDQUFDLFVBQVUsQ0FBQztBQUNsQyxNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBRXBCLE1BQU0sVUFBVSx3QkFBd0IsQ0FBQyxPQUFPO0lBQzVDLE9BQU87UUFDSCxLQUFLLEVBQUU7WUFDSCxJQUFJLEVBQUU7Z0JBQ0YsT0FBTyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7WUFDL0MsQ0FBQztZQUNELGtCQUFrQixFQUFFLFVBQVMsUUFBUTtnQkFDakMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztZQUNsRCxDQUFDO1lBQ0QsbUJBQW1CLEVBQUUsVUFBUyxRQUFRO2dCQUNsQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO1lBQ25ELENBQUM7WUFDRCxLQUFLLEVBQUU7Z0JBQ0gsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUNsQyxDQUFDO1lBQ0QsU0FBUyxFQUFFLFVBQVMsS0FBSztnQkFDckIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3RDLE9BQU8sQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbEMsQ0FBQztZQUNELFFBQVEsRUFBRSxVQUFTLEtBQUs7Z0JBQ3BCLE9BQU8sQ0FBQyxNQUFNLENBQUMs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QyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1lBQ25DLENBQUM7WUFDRCxjQUFjLEVBQUUsSUFBSTtZQUNwQixVQUFVLEVBQUUsVUFBUyxVQUFVO2dCQUMzQixPQUFPLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7WUFDNUMsQ0FBQztZQUNELE9BQU8sRUFBRSxJQUFJO1lBQ2IsZUFBZSxFQUFFLElBQUk7WUFDckIsU0FBUyxFQUFFLElBQUk7U0FDbEI7UUFDRCxTQUFTLEVBQUUsT0FBTyxDQUFDLFFBQVE7UUFDM0IsUUFBUSxFQUFFO1lBQ04sTUFBTSxFQUFFO2dCQUNKLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDbkMsQ0FBQztTQUNKO0tBQ0osQ0FBQztBQUNOLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBkZXBlbmRlbmNpZXMgZnJvbSAnQHBvbHB3YXJlL2ZlLWRlcGVuZGVuY2llcyc7XG5pbXBvcnQgeyBwdXNoQXJyYXkgfSBmcm9tICdAcG9scHdhcmUvZmUtdXRpbGl0aWVzJztcblxuaW1wb3J0IHsgSVZpZXdJbnN0YW5jZSB9IGZyb20gJ0Bwb2xwd2FyZS9mZS1tdmMnO1xuXG5jb25zdCBfID0gZGVwZW5kZW5jaWVzLnVuZGVyc2NvcmU7XG5jb25zdCBub29wID0gXy5ub29wO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRhcHRBbmd1bGFyVG9Db250cm9sbGVyKGNvbnRleHQpOiBJVmlld0luc3RhbmNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAkZGF0YToge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUubW9yZURhdGFDYW5CZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFJlZnJlc2hDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5jYWxsYmFja3Mub25SZWZyZXNoID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0SW5maW5pdGVDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5jYWxsYmFja3Mub25JbmZpbml0ZSA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbkl0ZW1zUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luY1B1c2g6IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUub25OZXdJdGVtc1JlYWR5KGl0ZW1zKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbkl0ZW1zUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW5jUHVzaDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbk5ld0l0ZW1zUmVhZHkoaXRlbXMpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uSXRlbXNSZWFkeSgpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgYXN5bmNQb3A6IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUub25JdGVtc1JlYWR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3luY1BvcDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbkl0ZW1zUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luY1ByZXBlbmQ6IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUub25OZXdJdGVtc1JlYWR5KGl0ZW1zKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbkl0ZW1zUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW5jUHJlcGVuZDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbk5ld0l0ZW1zUmVhZHkoaXRlbXMpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uSXRlbXNSZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jUmVmcmVzaDogbm9vcCxcbiAgICAgICAgICAgIHN5bmNSZWZyZXNoOiBub29wLFxuICAgICAgICAgICAgaGFzTW9yZURhdGE6IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5tb3JlRGF0YUNhbkJlTG9hZGVkID0gZmxhZztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRJdGVtczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0dXBTZWFyY2g6IGZ1bmN0aW9uKGNyaXRlcmlhLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLnNlYXJjaENyaXRlcmlhID0gY3JpdGVyaWE7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuZG9TZWFyY2ggPSBjYWxsYmFjaztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVTZWFyY2hDcml0ZXJpYTogZnVuY3Rpb24oY3JpdGVyaWEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5zZWFyY2hDcml0ZXJpYSA9IGNyaXRlcmlhO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEFuY2VzdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC4kc2NvcGUuYW5jZXN0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICRsb2FkZXI6IHtcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLnNob3dMb2FkaW5nSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuaGlkZUxvYWRpbmdJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJHJlZnJlc2hlcjoge1xuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuc2hvd1JlZnJlc2hpbmdJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5oaWRlUmVmcmVzaGluZ0luZGljYXRvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAkbW9yZUxvYWRlcjoge1xuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuc2hvd01vcmVMb2FkaW5nKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuaGlkZU1vcmVMb2FkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICRyb3V0ZXI6IHtcbiAgICAgICAgICAgIGdvOiBmdW5jdGlvbih1cmwsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzdGF0ZS5nbyh1cmwsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAkcmVuZGVyOiB7XG4gICAgICAgICAgICByZWFkeTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5jYWxsYmFja3Mub25WaWV3RGlkTG9hZCA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuY2FsbGJhY2tzLm9uVmlld1dpbGxVbmxvYWQgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luY0RpZ2VzdDogbm9vcFxuICAgICAgICB9LFxuICAgICAgICAkbmF2QmFyOiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRTdGF0ZTogbm9vcCxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IHN0YXRlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0U3RhdGU6IG5vb3BcbiAgICAgICAgfSxcbiAgICAgICAgJG1vZGFsOiB7XG4gICAgICAgICAgICBzZXREYXRhOiBmdW5jdGlvbihrZXksIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZVtrZXldID0gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXREYXRhOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC4kc2NvcGVba2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDogbm9vcFxuICAgICAgICB9LFxuICAgICAgICAkcG9wb3Zlcjoge1xuICAgICAgICAgICAgc2V0RGF0YTogZnVuY3Rpb24oa2V5LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGVba2V5XSA9IGRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0RGF0YTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuJHNjb3BlW2tleV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnVpbGQ6IG5vb3AsXG4gICAgICAgICAgICBvbkhpZGRlbjogbm9vcFxuICAgICAgICB9LFxuICAgICAgICAkcG9wdXA6IHtcbiAgICAgICAgICAgIHNldERhdGE6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5wb3B1cElucHV0ID0gXy5leHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICBjb25maXJtZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSwgZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0RGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuJHNjb3BlLnBvcHVwSW5wdXQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnVpbGQ6IG5vb3AsXG4gICAgICAgICAgICBjb25maXJtOiBub29wLFxuICAgICAgICAgICAgcHJvbXB0OiBub29wLFxuICAgICAgICAgICAgYWxlcnQ6IG5vb3BcbiAgICAgICAgfSxcbiAgICAgICAgJHByb2dyZXNzQmFyOiB7XG4gICAgICAgICAgICBjcmVhdGU6IG5vb3AsXG4gICAgICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUucHJvZ3Jlc3NCYXIgPSAwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZUluZmluaXRlOiBub29wLFxuICAgICAgICAgICAgb25Qcm9ncmVzczogZnVuY3Rpb24ocGVyY2VudGFnZSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLnByb2dyZXNzQmFyID0gcGVyY2VudGFnZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXN0cm95OiBub29wLFxuICAgICAgICAgICAgZGVzdHJveUluZmluaXRlOiBub29wLFxuICAgICAgICAgICAgc2hvd0Fib3J0OiBub29wXG4gICAgICAgIH0sXG4gICAgICAgICRhbGVydGlmeTogY29udGV4dC5hbGVydGlmeSxcbiAgICAgICAgJGhpc3Rvcnk6IHtcbiAgICAgICAgICAgIGdvQmFjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kaW9uaWNIaXN0b3J5LmdvQmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cblxuIl19