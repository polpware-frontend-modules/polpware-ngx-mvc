import * as dependencies from '@polpware/fe-dependencies';
const _ = dependencies.underscore;
const noop = _.noop;
export function adaptAngularToController(context) {
    return {
        $data: {
            init: function () {
                context.$scope.moreDataCanBeLoaded = false;
            },
            setRefreshCallback: function (callback) {
                context.$scope.callbacks.onRefresh = callback;
            },
            setInfiniteCallback: function (callback) {
                context.$scope.callbacks.onInfinite = callback;
            },
            clean: function () {
                context.$scope.onItemsReady();
            },
            asyncPush: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            syncPush: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            asyncPop: function (items) {
                context.$scope.onItemsReady();
            },
            syncPop: function (items) {
                context.$scope.onItemsReady();
            },
            asyncPrepend: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            syncPrepend: function (items) {
                context.$scope.onNewItemsReady(items);
                context.$scope.onItemsReady();
            },
            asyncRefresh: noop,
            syncRefresh: noop,
            hasMoreData: function (flag) {
                context.$scope.moreDataCanBeLoaded = flag;
            },
            getItems: function () {
            },
            setupSearch: function (criteria, callback) {
                context.$scope.searchCriteria = criteria;
                context.$scope.doSearch = callback;
            },
            updateSearchCriteria: function (criteria) {
                context.$scope.searchCriteria = criteria;
            },
            getAncestor: function () {
                return context.$scope.ancestor;
            }
        },
        $loader: {
            show: function () {
                context.$scope.showLoadingIndicator();
            },
            hide: function () {
                context.$scope.hideLoadingIndicator();
            }
        },
        $refresher: {
            show: function () {
                context.$scope.showRefreshingIndicator();
            },
            hide: function () {
                context.$scope.hideRefreshingIndicator();
            }
        },
        $moreLoader: {
            show: function () {
                context.$scope.showMoreLoading();
            },
            hide: function () {
                context.$scope.hideMoreLoading();
            }
        },
        $router: {
            go: function (url, data) {
                context.$state.go(url, data);
            }
        },
        $render: {
            ready: function (callback) {
                context.$scope.callbacks.onViewDidLoad = callback;
            },
            destroy: function (callback) {
                context.$scope.callbacks.onViewWillUnload = callback;
            },
            asyncDigest: noop
        },
        $navBar: {
            /**
             * Get current state
             * @returns {}
             */
            getState: noop,
            /**
             * Set state
             * @param {Boolean} s
             */
            setState: noop
        },
        $modal: {
            setData: function (key, data) {
                context.$scope[key] = data;
            },
            getData: function (key) {
                return context.$scope[key];
            },
            build: noop
        },
        $popover: {
            setData: function (key, data) {
                context.$scope[key] = data;
            },
            getData: function (key) {
                return context.$scope[key];
            },
            build: noop,
            onHidden: noop
        },
        $popup: {
            setData: function (data) {
                context.$scope.popupInput = _.extend({
                    confirmed: false
                }, data);
            },
            getData: function () {
                return context.$scope.popupInput;
            },
            build: noop,
            confirm: noop,
            prompt: noop,
            alert: noop
        },
        $progressBar: {
            create: noop,
            reset: function () {
                context.$scope.progressBar = 0;
            },
            createInfinite: noop,
            onProgress: function (percentage) {
                context.$scope.progressBar = percentage;
            },
            destroy: noop,
            destroyInfinite: noop,
            showAbort: noop
        },
        $alertify: context.alertify,
        $history: {
            goBack: function () {
                context.$ionicHistory.goBack();
            }
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci10by1jb250cm9sbGVyLWFkYXB0b3IuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9scHdhcmUvbmd4LW12Yy8iLCJzb3VyY2VzIjpbImxpYi9tdmMvYWRhcHRvcnMvYW5ndWxhci10by1jb250cm9sbGVyLWFkYXB0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLFlBQVksTUFBTSwyQkFBMkIsQ0FBQztBQUsxRCxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDO0FBQ2xDLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFFcEIsTUFBTSxVQUFVLHdCQUF3QixDQUFDLE9BQU87SUFDNUMsT0FBTztRQUNILEtBQUssRUFBRTtZQUNILElBQUksRUFBRTtnQkFDRixPQUFPLENBQUMsTUFBTSxDQUFDLG1CQUFtQixHQUFHLEtBQUssQ0FBQztZQUMvQyxDQUFDO1lBQ0Qsa0JBQWtCLEVBQUUsVUFBUyxRQUFRO2dCQUNqQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1lBQ2xELENBQUM7WUFDRCxtQkFBbUIsRUFBRSxVQUFTLFFBQVE7Z0JBQ2xDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUM7WUFDbkQsQ0FBQztZQUNELEtBQUssRUFBRTtnQkFDSCxPQUFPLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ2xDLENBQUM7WUFDRCxTQUFTLEVBQUUsVUFBUyxLQUFLO2dCQUNyQixPQUFPLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDdEMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUNsQyxDQUFDO1lBQ0QsUUFBUSxFQUFFLFVBQVMsS0FBSztnQkFDcEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JB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Q0FBQztZQUNELGNBQWMsRUFBRSxJQUFJO1lBQ3BCLFVBQVUsRUFBRSxVQUFTLFVBQVU7Z0JBQzNCLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztZQUM1QyxDQUFDO1lBQ0QsT0FBTyxFQUFFLElBQUk7WUFDYixlQUFlLEVBQUUsSUFBSTtZQUNyQixTQUFTLEVBQUUsSUFBSTtTQUNsQjtRQUNELFNBQVMsRUFBRSxPQUFPLENBQUMsUUFBUTtRQUMzQixRQUFRLEVBQUU7WUFDTixNQUFNLEVBQUU7Z0JBQ0osT0FBTyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNuQyxDQUFDO1NBQ0o7S0FDSixDQUFDO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRlcGVuZGVuY2llcyBmcm9tICdAcG9scHdhcmUvZmUtZGVwZW5kZW5jaWVzJztcbmltcG9ydCB7IHB1c2hBcnJheSB9IGZyb20gJ0Bwb2xwd2FyZS9mZS11dGlsaXRpZXMnO1xuXG5pbXBvcnQgeyBJVmlld0luc3RhbmNlIH0gZnJvbSAnQHBvbHB3YXJlL2ZlLW12Yyc7XG5cbmNvbnN0IF8gPSBkZXBlbmRlbmNpZXMudW5kZXJzY29yZTtcbmNvbnN0IG5vb3AgPSBfLm5vb3A7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGFwdEFuZ3VsYXJUb0NvbnRyb2xsZXIoY29udGV4dCk6IElWaWV3SW5zdGFuY2Uge1xuICAgIHJldHVybiB7XG4gICAgICAgICRkYXRhOiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5tb3JlRGF0YUNhbkJlTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UmVmcmVzaENhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLmNhbGxiYWNrcy5vblJlZnJlc2ggPSBjYWxsYmFjaztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRJbmZpbml0ZUNhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLmNhbGxiYWNrcy5vbkluZmluaXRlID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uSXRlbXNSZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jUHVzaDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbk5ld0l0ZW1zUmVhZHkoaXRlbXMpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uSXRlbXNSZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN5bmNQdXNoOiBmdW5jdGlvbihpdGVtcykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uTmV3SXRlbXNSZWFkeShpdGVtcyk7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUub25JdGVtc1JlYWR5KCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBhc3luY1BvcDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbkl0ZW1zUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW5jUG9wOiBmdW5jdGlvbihpdGVtcykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uSXRlbXNSZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jUHJlcGVuZDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5vbk5ld0l0ZW1zUmVhZHkoaXRlbXMpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uSXRlbXNSZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN5bmNQcmVwZW5kOiBmdW5jdGlvbihpdGVtcykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm9uTmV3SXRlbXNSZWFkeShpdGVtcyk7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUub25JdGVtc1JlYWR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmNSZWZyZXNoOiBub29wLFxuICAgICAgICAgICAgc3luY1JlZnJlc2g6IG5vb3AsXG4gICAgICAgICAgICBoYXNNb3JlRGF0YTogZnVuY3Rpb24oZmxhZykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLm1vcmVEYXRhQ2FuQmVMb2FkZWQgPSBmbGFnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEl0ZW1zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXR1cFNlYXJjaDogZnVuY3Rpb24oY3JpdGVyaWEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuc2VhcmNoQ3JpdGVyaWEgPSBjcml0ZXJpYTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5kb1NlYXJjaCA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZVNlYXJjaENyaXRlcmlhOiBmdW5jdGlvbihjcml0ZXJpYSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLnNlYXJjaENyaXRlcmlhID0gY3JpdGVyaWE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0QW5jZXN0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LiRzY29wZS5hbmNlc3RvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJGxvYWRlcjoge1xuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUuc2hvd0xvYWRpbmdJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5oaWRlTG9hZGluZ0luZGljYXRvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAkcmVmcmVzaGVyOiB7XG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5zaG93UmVmcmVzaGluZ0luZGljYXRvcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLmhpZGVSZWZyZXNoaW5nSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICRtb3JlTG9hZGVyOiB7XG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5zaG93TW9yZUxvYWRpbmcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5oaWRlTW9yZUxvYWRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJHJvdXRlcjoge1xuICAgICAgICAgICAgZ286IGZ1bmN0aW9uKHVybCwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHN0YXRlLmdvKHVybCwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICRyZW5kZXI6IHtcbiAgICAgICAgICAgIHJlYWR5OiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLmNhbGxiYWNrcy5vblZpZXdEaWRMb2FkID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5jYWxsYmFja3Mub25WaWV3V2lsbFVubG9hZCA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jRGlnZXN0OiBub29wXG4gICAgICAgIH0sXG4gICAgICAgICRuYXZCYXI6IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFN0YXRlOiBub29wLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgc3RhdGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRTdGF0ZTogbm9vcFxuICAgICAgICB9LFxuICAgICAgICAkbW9kYWw6IHtcbiAgICAgICAgICAgIHNldERhdGE6IGZ1bmN0aW9uKGtleSwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlW2tleV0gPSBkYXRhO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldERhdGE6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LiRzY29wZVtrZXldO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1aWxkOiBub29wXG4gICAgICAgIH0sXG4gICAgICAgICRwb3BvdmVyOiB7XG4gICAgICAgICAgICBzZXREYXRhOiBmdW5jdGlvbihrZXksIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZVtrZXldID0gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXREYXRhOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC4kc2NvcGVba2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDogbm9vcCxcbiAgICAgICAgICAgIG9uSGlkZGVuOiBub29wXG4gICAgICAgIH0sXG4gICAgICAgICRwb3B1cDoge1xuICAgICAgICAgICAgc2V0RGF0YTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuJHNjb3BlLnBvcHVwSW5wdXQgPSBfLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1lZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LCBkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXREYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC4kc2NvcGUucG9wdXBJbnB1dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWlsZDogbm9vcCxcbiAgICAgICAgICAgIGNvbmZpcm06IG5vb3AsXG4gICAgICAgICAgICBwcm9tcHQ6IG5vb3AsXG4gICAgICAgICAgICBhbGVydDogbm9vcFxuICAgICAgICB9LFxuICAgICAgICAkcHJvZ3Jlc3NCYXI6IHtcbiAgICAgICAgICAgIGNyZWF0ZTogbm9vcCxcbiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRzY29wZS5wcm9ncmVzc0JhciA9IDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3JlYXRlSW5maW5pdGU6IG5vb3AsXG4gICAgICAgICAgICBvblByb2dyZXNzOiBmdW5jdGlvbihwZXJjZW50YWdlKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC4kc2NvcGUucHJvZ3Jlc3NCYXIgPSBwZXJjZW50YWdlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IG5vb3AsXG4gICAgICAgICAgICBkZXN0cm95SW5maW5pdGU6IG5vb3AsXG4gICAgICAgICAgICBzaG93QWJvcnQ6IG5vb3BcbiAgICAgICAgfSxcbiAgICAgICAgJGFsZXJ0aWZ5OiBjb250ZXh0LmFsZXJ0aWZ5LFxuICAgICAgICAkaGlzdG9yeToge1xuICAgICAgICAgICAgZ29CYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LiRpb25pY0hpc3RvcnkuZ29CYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4iXX0=